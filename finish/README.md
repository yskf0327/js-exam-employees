# JavaScript 考査課題仕様書：社員管理システム

## 1. 概要
JavaScriptを用いて、以下の要件を満たす「社員管理システム簡易版」を作成しなさい。
配布された `start` フォルダ内のファイル (`index.html`, `style.css`, `script.js`) を使用して実装を行うこと。

## 2. 要件

### 2-1. データ構造
社員情報は以下の構造を持つオブジェクトの配列 (`employees`) として、`script.js` に予め定義されている。

| プロパティ名 | 型 | 説明 | 例 |
| :--- | :--- | :--- | :--- |
| `id` | 数値 | 社員番号 | `1001` |
| `name` | オブジェクト | 氏名情報 | `{ last: "山田", first: "太郎" }` |
| `birthDate` | 文字列 | 生年月日 (YYYY-MM-DD) | `"1985-05-20"` |
| `department` | 文字列 | 所属部署 | `"営業部"` |
| `licenses` | 配列 | 保有資格リスト | `["普通自動車", "簿記2級"]` |
| `basicSalary` | 数値 | 基本給（グレード1〜5） | `3` |
| `image` | 文字列 | 顔画像ファイル名（省略可） | `"1001.jpg"` |

#### 基本給テーブル (`SALARY_TABLE`)
`script.js` には、基本給グレードに対応する金額を定義した定数 `SALARY_TABLE` が用意されている。
給与計算を行う際は、このテーブルを参照して基本給を取得すること。

| グレード | 基本給 |
| :--- | :--- |
| 1 | 180,000円 |
| 2 | 260,000円 |
| 3 | 340,000円 |
| 4 | 420,000円 |
| 5 | 520,000円 |

### 2-2. 実装機能

#### A. 一覧表示 (`renderTable`)
*   `employees` 配列のデータを元に、HTMLのテーブル (`tbody#employee-list`) に行を追加して表示すること。
*   各行には以下の項目を表示すること:
    1.  **社員番号**
    2.  **氏名**（姓と名を連結して表示）
    3.  **部署**
    4.  **年齢**（`birthDate` から計算）
    5.  **詳細ボタン**（クリックするとモーダルを開く）
        *   Bootstrapクラス `btn btn-primary btn-sm` を適用すること。

#### B. 絞り込み機能
*   画面上部のセレクトボックス (`select#department-filter`) が変更された際、選択された部署に所属する社員のみを一覧に表示すること。
*   「すべて」が選択された場合は、全社員を表示すること。
*   `renderTable` 関数を改修し、引数で渡された配列を描画できるようにすること（または同等の絞り込み実装を行うこと）。

#### C. 詳細表示 (`showDetail`)
*   一覧の「詳細ボタン」をクリックした際、対象の社員の詳細情報を `<dialog>` タグを用いたモーダルで表示すること。
*   **画像表示**: データに画像ファイル名がある場合は `images/` 配下の画像を表示し、なければ `images/default.png` を表示すること。
*   **閉じる機能**: モーダル内の「閉じる」ボタンをクリックした際、モーダルを閉じる (`dialog.close()`) 処理を実装すること。
*   **年齢計算**: `calculateAge` 関数を実装し、生年月日から現在の年齢を計算して表示すること。
*   **給与計算**: `calculateTotalSalary` 関数を実装し、以下の計算式で総支給額を表示すること。
    *   **基本給**: `SALARY_TABLE` 定数（オブジェクト）を参照し、グレードに対応する金額を取得する。
        *   Grade 1: 180,000円
        *   Grade 2: 260,000円
        *   Grade 3: 340,000円
        *   Grade 4: 420,000円
        *   Grade 5: 520,000円
    *   **資格手当**: 保有資格数 × 5,000円
    *   **総支給額** = 基本給 + 資格手当

### 2-3. 関数仕様
以下の関数を実装すること。

1.  **`calculateAge(birthDate)`**
    *   引数: 生年月日文字列 ("YYYY-MM-DD")
    *   戻り値: 現在の年齢（数値）
    *   ヒント: `new Date()` で現在日時と誕生日の差分から計算する。

2.  **`calculateTotalSalary(grade, licenseCount)`**
    *   引数: 基本給グレード(数値), 資格数(数値)
    *   戻り値: 総支給額（数値）

3.  **`renderTable()`**
    *   画面初期化時に実行し、テーブルに行を生成する。

4.  **`showDetail(id)`**
    *   引数: 社員ID
    *   指定されたIDの社員データを検索し、モーダル内の各要素に値をセットしてから `dialog.showModal()` を実行する。

## 3. 評価基準

以下の観点で評価を行います。

### A. 実装機能の完成度
1.  **一覧表示機能**
    *   配列データを正しくループ処理できているか。
    *   `tr`, `td` 要素などのDOM生成が適切に行われているか。
    *   各カラム（社員番号、氏名、部署、年齢）の表示内容が正しいか。

2.  **ロジック・計算処理**
    *   **年齢計算**: `Date` オブジェクトを使用し、誕生日前後の判定を含めた正確な計算ができているか。
    *   **給与計算**: 基本給テーブル (`SALARY_TABLE`) の参照と、資格数に応じた手当の加算が正しく行われているか。

3.  **詳細モーダル機能**
    *   詳細ボタンクリック時に、対象のデータを正しく取得できているか。
    *   取得したデータをモーダル内の要素にセットし、正しく表示できているか。

### B. コード品質
*   コンソールにエラーが出ないこと。
*   ブラウザ上の表示が適切であること。
*   インデントや変数名が適切で、可読性の高いコードであること。
*   DRY(Don't Repeat Yourself)の原則を守れているか。
*   指定されたファイル構成やBootstrapのクラス利用などの要件を守れているか。
